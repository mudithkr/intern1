!function(a){a.fn.isInViewport=function b(c){c&&(c.tolerance=Math.round(parseFloat(c.tolerance)),isNaN(c.tolerance)&&(c.tolerance=0),"boolean"!=typeof c.debug&&(c.debug=!1));var d=this.get(0),e=d.getBoundingClientRect(),f=e.top,g=e.bottom,h=a(window).scrollTop()===a(document).height()-a(window).height()?!0:!1,i=""+d.offsetLeft+d.offsetTop+e.height+e.width,j=a.extend({tolerance:0,debug:!1},c),k=!1;return b.elementsAfterCurrent=b.elementsAfterCurrent||{},b.elementsAfterCurrent[i]=b.elementsAfterCurrent[i]||this.nextAll(),j.debug&&(console.log("---------------------------------------"),console.log("index: "+i),console.log("div: "+this.text().trim()),console.log("top: "+f),console.log("bottom: "+g),console.log("tolerance: "+j.tolerance),console.log("end of page: "+h),console.log("scrollTop: "+a(window).scrollTop()),console.log("doc height:"+a(document).height()),console.log("windowHeight using $(window).height(): "+a(window).height())),k=j.tolerance?f>=0?f<=j.tolerance?!0:!1:g>j.tolerance?!0:!1:f>=0&&f<=a(window).height()?!0:!1,h&&(1!==b.elementsAfterCurrent[i].length&&b.elementsAfterCurrent[i].length||(k=0>f?!1:!0)),k},a.extend(a.expr[":"],{"in-viewport":function(b,c,d){return d[3]?a(b).isInViewport({tolerance:d[3]}):a(b).isInViewport()}})}(jQuery),function(a,b){a.NW||(a.NW={}),a.NW.events=b()}(this,function(){"use strict";var a={},b=function(b,c){var d=0,e=[c].concat(Array.prototype.slice.call(arguments,2));if(a.hasOwnProperty(c))for(d=0;d<a[c].length;d++)a[c][d].apply(b,e)},c=function(b,c){a.hasOwnProperty(b)||(a[b]=[]),a[b].push(c)},d=function(b,c){var d;if(a.hasOwnProperty(b))for(d=0;d<a[b].length;d++)if(a[b][d]==c)return void a[b].splice(d,1)},e=function(){a={}};return{trigger:b,subscribe:c,reset:e,unsubscribe:d}}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={}),a.NW.analytics=b(jQuery,NW.events)}(this,function(a,b){"use strict";var c=null,d=!1,e=null,f=function(b){a(b).each(function(a,b){g(b)})},g=function(b){var c=a(b);if(h(c),c.is("[data-track-click]")&&!c.is("[data-track-impression]"))throw new Error("Element "+b+" has data-track-click attribute but not data-track-impression!")},h=function(b){var c=["data-cid","data-cname","data-ctype"];a.each(c,function(a,c){if(!b.is("["+c+"]"))throw new Error("Required attribute "+c+" does not exist for "+b)})};return{page_offset:1,clicks_attached:!1,pageview_id:Math.random().toString(36).slice(2),options:{debug:!1},fireImpressionEvents:function(){null===e&&(e=a("body").find("[data-track-impression]"));for(var b,c=e.filter(":in-viewport"),d=1;d<=c.length;d++)b=a(c[d-1]),this.options.debug&&g(b),void 0===b.data("impression-fired")&&(this._fireEvent("Product Impression",this._getEventAttributesFromProduct(b)),b.data("impression-fired",!0));this._attachImpressionScrollHandler()},attachClickListeners:function(){if(this.options.debug&&f("[data-track-click]"),this.clicks_attached)return void(this.options.debug&&console.log("Warning: attachClickListeners() called more than once."));this.clicks_attached=!0;var b=this;a("body").on("click","[data-track-click]",function(c){var d=a(this);if(b._fireEvent("Product Click",b._getEventAttributesFromProduct(d)),d.is("[href]")){var e=d.attr("href"),f=d.prop("search"),g="?";f.length>0&&(g="&"),d.prop("search",f+g+"pos="+b._getRelativePosition(d)),c.preventDefault(),d.is('[target="_blank"]')?(window.open(d.attr("href")),d.attr("href",e)):setTimeout(function(){b.setBrowserLocation(d.attr("href"))},100)}})},identifyUser:function(a){this.uid=a,this._fireEvent("User Identity",{id:a})},pageView:function(a){this._fireEvent("PAGE_VIEW_EVENT",{url_override:a})},_fireEvent:function(a,c){b.trigger(this,"analyticsEvent",a,c)},_getRelativePosition:function(b){var c=a(b);if(!c.is("[data-track-impression]")){var d=c.attr("data-cid"),e=c.attr("data-ctype"),f='[data-track-impression][data-cid="'+d+'"][data-ctype="'+e+'"]',g=c.parents(f);g.length>0&&(c=$(g[0]))}var h=c.index("[data-track-impression]");return-1==h&&(this.debug("Couldn't find relative position, assuming 1st position"),h=0),h+this.page_offset},_getEventAttributesFromProduct:function(b){var c=a(b);return{product_id:parseInt(c.attr("data-cid"),10),product_name:c.attr("data-cname"),product_type:c.attr("data-ctype"),position:this._getRelativePosition(c),url:window.location.href}},_attachImpressionScrollHandler:function(){if(!d){var a=this;$(window).on("scroll",function(){c&&clearTimeout(c),c=setTimeout(function(){a.fireImpressionEvents()},100)}),d=!0}},_clearCache:function(){e=null},setBrowserLocation:function(a){window.location.assign(a)},debug:function(a){this.options.debug&&console.log(a)}}}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={}),a.NW.analytics.LoggerBase=b(NW.events)}(this,function(a){"use strict";var b="analyticsEvent",c=function(){this.start()};return c.prototype.start=function(){var c=this;this._evHandler=function(){c.trackEvent.apply(c,Array.prototype.slice.call(arguments,1))},a.subscribe(b,this._evHandler)},c.prototype.stop=function(){a.unsubscribe(b,this._evHandler)},c.prototype.trackEvent=function(){console.log("trackEvent undefined for LoggerBase!")},c}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={}),a.NW.analytics.ClassicGALogger=b(NW.analytics.LoggerBase)}(this,function(a){"use strict";var b=new a;return b.trackEvent=function(a,b){if("undefined"==typeof _gaq)return void NW.analytics.debug("Google Analytics snippet not on this page, not firing event");if("Product Click"===a||"Product Impression"===a){var c=b.product_type,d=a,e=b.product_name,f=b.position,g=!1;_gaq.push(["_trackEvent",c,d,e,f,g])}"User Identity"===a&&_gaq.push(["_setCustomVar",1,"UV",b.id],1),"PAGE_VIEW_EVENT"===a&&_gaq.push(["_trackPageview"])},b}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={}),a.NW.analytics.KafkaLogger=b(NW.analytics.LoggerBase)}(this,function(a){"use strict";var b=new a;return b.trackEvent=function(a,b){if("PAGE_VIEW_EVENT"==a){var c={header:{cookieId:NW.analytics.uid,url:window.location.href,pageviewId:NW.analytics.pageview_id,eventName:a,referrer:document.referrer}};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);{JSON.stringify(c),~document.domain.indexOf("stage.nerdwallet.biz")?"nerdwallet.biz":document.domain}}},b}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={}),a.NW.analytics.LocalStorageLogger=b(NW.analytics.LoggerBase)}(this,function(a){"use strict";var b="AnalyticsLoggerTrackedEvents",c=new a;return c.clearTrackedEvents=function(){sessionStorage.removeItem(b)},c.getTrackedEvents=function(){return JSON.parse(sessionStorage[b]||"[]")},c.trackEvent=function(a,c){if(!window.sessionStorage)return console.log("This browser does not support session storage; disabling AnalyticsLogger"),void this.stop();if(NW.analytics.options.debug){var d=this.getTrackedEvents();d.push({event_name:a,event_params:c}),sessionStorage[b]=JSON.stringify(d)}},c}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={});var c="undefined"==typeof window.analytics?void 0:window.analytics;a.NW.analytics.SegmentIoLogger=b(NW.analytics.LoggerBase,c)}(this,function(a,b){"use strict";var c=new a,d={providers:{"Google Analytics":!1}};return c.trackEvent=function(a,c){if("undefined"==typeof b)return void NW.analytics.debug("Segment.io not found, not logging event");if("User Identity"===a)"undefined"!=typeof b.identify&&b.identify(c.id);else{if("PAGE_VIEW_EVENT"===a)return;b.track(a,c,d)}},c}),function(a,b){a.NW||(a.NW={}),a.NW.analytics||(a.NW.analytics={}),a.NW.analytics.UniversalGALogger=b(NW.analytics.LoggerBase)}(this,function(a){"use strict";var b=new a;return b.trackEvent=function(a,b){if("undefined"==typeof ga)return void NW.analytics.debug("Universal Analytics snippet not on this page, not firing event");if(NW.analytics.gaClientId||ga(function(a){var b=a.get("clientId");NW.analytics.gaClientId=b;var c={gaClientId:b};jQuery.post("/lib/ga_identify.php",{data:JSON.stringify(c)})}),"Product Click"===a){var c=b.product_type,d=a,e=b.product_name,f=b.position;ga("send","event",c,d,e,f,{nonInteraction:!0}),NW.analytics.debug("universal GA: track impression: "+e)}if("User Identity"===a&&(ga("set","dimension1",b.id),NW.analytics.debug("Universal GA: set dimension1 to "+b.id)),"PAGE_VIEW_EVENT"===a){var g=b.url_override;void 0!==g?ga("send","pageview",g):ga("send","pageview"),NW.analytics.debug("universal GA: track pageview")}},b});